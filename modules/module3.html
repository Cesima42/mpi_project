<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Модуль 3: Жиынтық операциялар - MPI LAB</title>
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        /* Стили из module2 с небольшими изменениями */
        .accordion {
            margin: 2rem 0;
        }
        
        .accordion-item {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            margin-bottom: 1rem;
            overflow: hidden;
        }
        
        .accordion-header {
            padding: 1.2rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(155, 89, 182, 0.1); /* Фиолетовый для модуля 3 */
            transition: var(--transition);
        }
        
        .accordion-header:hover {
            background: rgba(155, 89, 182, 0.15);
        }
        
        .accordion-header.active {
            background: rgba(155, 89, 182, 0.2);
            border-bottom: 1px solid var(--border-color);
        }
        
        .accordion-title {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .accordion-icon {
            transition: transform 0.3s ease;
        }
        
        .accordion-header.active .accordion-icon {
            transform: rotate(180deg);
        }
        
        .accordion-content {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease;
        }
        
        .accordion-content.active {
            padding: 1.5rem;
            max-height: 5000px;
        }
        
        /* Компактный стиль для инпутов */
        .compact-inputs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .compact-input {
            display: flex;
            flex-direction: column;
            gap: 0.3rem;
        }
        
        .compact-input label {
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--primary-color);
        }
        
        .compact-input input, .compact-input select {
            padding: 0.6rem;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            background: var(--bg-color);
            color: var(--text-color);
        }
        
        .compact-run-btn {
            background: linear-gradient(135deg, #9b59b6, #8e44ad); /* Фиолетовый */
            color: white;
            border: none;
            padding: 0.6rem 1.2rem;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 1rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
        }
        
        .compact-run-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(155, 89, 182, 0.3);
        }
        
        .compact-run-btn.running {
            background: linear-gradient(135deg, var(--warning-color), #e67e22);
        }
        
        /* Компактный вывод */
        .compact-output {
            background: var(--code-bg);
            color: #f8f8f2; /* Явно задаем светлый цвет */
            border-radius: 5px;
            padding: 1rem;
            margin-top: 1rem;
            font-family: 'Consolas', monospace;
            font-size: 0.9rem;
            line-height: 1.4;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #333;
        }
        
        .task-number {
            background: #9b59b6; /* Фиолетовый */
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .tasks-count {
            text-align: center;
            margin: 2rem 0;
            padding: 1rem;
            background: var(--card-bg);
            border-radius: 10px;
            border: 1px solid var(--border-color);
        }
        
        .tasks-count h3 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }
        
        /* Для сложных вводов */
        .process-input-group {
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: rgba(0,0,0,0.03);
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        
        .process-input-group h5 {
            margin-top: 0;
            color: var(--primary-color);
            margin-bottom: 0.8rem;
        }
        
        .array-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 0.5rem;
            margin-top: 0.5rem;
        }
        
        .array-item {
            display: flex;
            flex-direction: column;
            gap: 0.2rem;
        }
        
        .array-item label {
            font-size: 0.8rem;
            opacity: 0.8;
        }
        
        .derived-type {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.8rem;
            margin: 1rem 0;
        }
        
        .type-label {
            font-weight: 600;
            color: #9b59b6;
            margin-bottom: 0.3rem;
        }
        
        .section-title {
            color: #9b59b6;
            margin: 1.5rem 0 1rem 0;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid rgba(155, 89, 182, 0.2);
        }
        
        .info-box {
            background: rgba(155, 89, 182, 0.05);
            border-left: 4px solid #9b59b6;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 5px 5px 0;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <a href="index.html" class="logo">
                <span class="atu-badge">АТУ</span>
                MPI<span class="lab-text">Орталығы</span>
            </a>
            <div class="nav-links">
                <a href="../index.html"><i class="fas fa-home"></i> Басты</a>
                <a href="../about.html"><i class="fas fa-info-circle"></i> Жоба туралы</a>
                <a href="../basics.html"><i class="fas fa-book"></i> MPI теориясы</a>
                <div class="dropdown">
                    <a href="#" class="dropdown-toggle active"><i class="fas fa-cubes"></i> Модульдер <i class="fas fa-chevron-down"></i></a>
                    <div class="dropdown-menu">
                        <a href="module1.html"><i class="fas fa-microchip"></i> Модуль 1</a>
                        <a href="module2.html"><i class="fas fa-exchange-alt"></i> Модуль 2</a>
                        <a href="module3.html" class="active"><i class="fas fa-users"></i> Модуль 3</a>
                        <a href="module4.html"><i class="fas fa-network-wired"></i> Модуль 4</a>
                        <a href="module5.html"><i class="fas fa-project-diagram"></i> Модуль 5</a>
                    </div>
                </div>
                <a href="../cloud.html"><i class="fas fa-cloud"></i> Бұлттық технологиялар</a>
            </div>
            <button class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon"></i>
            </button>
            <button class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <section class="module-hero">
        <div class="container">
            <div class="hero-content">
                <h1>Модуль 3: Жиынтық операциялар</h1>
                <p class="subtitle">MPI_Reduce, MPI_Allreduce, туынды типтер және деректерді орау</p>
                <p class="description">
                    Бұл модульде MPI жиынтық операцияларымен, туынды дерек типтерімен және 
                    деректерді орау функцияларымен жұмыс істеуді үйренедіз. Вариант 16 бойынша 
                    9 практикалық тапсырманы орындайсыз.
                </p>
            </div>
        </div>
    </section>

    <section class="module-content">
        <div class="container">
            <!-- Breadcrumb -->
            <div class="breadcrumb">
                <a href="../index.html">Басты</a> / 
                <a href="../basics.html">MPI негіздері</a> / 
                <span>Модуль 3: Жиынтық операциялар</span>
            </div>

            <div class="tasks-count">
                <h3><i class="fas fa-tasks"></i> Вариант 16: 9 тапсырма</h3>
                <p>Төмендегі тапсырмалардың әрқайсысын кеңейту арқылы ашып, орындауға болады.</p>
                <div class="info-box">
                    <p><strong>K = процесстер саны = 4</strong> (0-бас процесс + 3 бас емес процесс)</p>
                    <p><strong>K+5 = 9</strong> сан (49, 51, 57 тапсырмалар үшін)</p>
                    <p><strong>K = 4</strong> сан (53 тапсырма үшін)</p>
                </div>
            </div>

            <div class="accordion" id="tasksAccordion">
                <!-- Task 49 - MPIBegin49 -->
                <div class="accordion-item">
                    <div class="accordion-header" data-task="49">
                        <div class="accordion-title">
                            <i class="fas fa-search-minus"></i> MPIBegin49
                            <span class="task-number">1</span>
                        </div>
                        <i class="fas fa-chevron-down accordion-icon"></i>
                    </div>
                    <div class="accordion-content">
                        <div class="task-description">
                            <p><strong>Тапсырма:</strong> Әр процесте K+5 саннан тұратын жиынтық берілген (K - процесстер саны). MPI_Reduce функциясын MPI_MIN операциясымен пайдаланып, әрбір реттік нөмірдегі элементтердің минималды мәнін тауып, алынған минимумдарды бас процесте шығару.</p>
                            <p><strong>K = 4, K+5 = 9 сан әр процесте</strong></p>
                        </div>
                        
                        <div class="code-execution">
                            <h4><i class="fas fa-play-circle"></i> Енгізу деректері (4 процесс, әрқайсысында 9 сан):</h4>
                            
                            <div class="process-input-group">
                                <h5>Процесс 0 (бас):</h5>
                                <div class="array-container" id="array49-0">
                                    <!-- Динамически создадутся 9 полей -->
                                </div>
                            </div>
                            
                            <div class="process-input-group">
                                <h5>Процесс 1:</h5>
                                <div class="array-container" id="array49-1">
                                    <!-- Динамически создадутся 9 полей -->
                                </div>
                            </div>
                            
                            <div class="process-input-group">
                                <h5>Процесс 2:</h5>
                                <div class="array-container" id="array49-2">
                                    <!-- Динамически создадутся 9 полей -->
                                </div>
                            </div>
                            
                            <div class="process-input-group">
                                <h5>Процесс 3:</h5>
                                <div class="array-container" id="array49-3">
                                    <!-- Динамически создадутся 9 полей -->
                                </div>
                            </div>
                            
                            <button class="compact-run-btn" data-task="49">
                                <i class="fas fa-play"></i> Іске қосу (MPI_Reduce + MPI_MIN)
                            </button>
                            
                            <div class="compact-output" id="output49">
                                Мәліметтерді енгізіңіз және "Іске қосу" түймесін басыңыз...
                            </div>
                        </div>
                        
                        <div class="explanation">
                            <h4><i class="fas fa-lightbulb"></i> Негізгі идея:</h4>
                            <p>MPI_Reduce әр процестен деректерді жинап, операцияны орындайды (MPI_MIN - минимум). Нәтиже тек бас процесте болады.</p>
                        </div>
                        
                        <div class="code-example">
                            <div class="code-header">
                                <span>mpi_begin49.c - ДҰРЫС ШЕШІМ</span>
                                <button class="copy-btn" onclick="copyCode('task49-code')">
                                    <i class="far fa-copy"></i> Көшіру
                                </button>
                            </div>
                            <pre id="task49-code"><code>#include "mpi.h"
#include &lt;stdio.h&gt;

#define K 4           // Процесс саны
#define ARRAY_SIZE 9  // K+5 = 9

int main(int argc, char *argv[]) {
    int rank, size;
    double local_array[ARRAY_SIZE];
    double global_min[ARRAY_SIZE];
    
    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &size);
    
    // Әр процесте массивті толтыру
    for (int i = 0; i < ARRAY_SIZE; i++) {
        local_array[i] = (rank + 1) * 10 + i; // Мысал мәндер
    }
    
    // MPI_Reduce: барлық процесстерден минимумдарды жинау
    MPI_Reduce(local_array, global_min, ARRAY_SIZE,
               MPI_DOUBLE, MPI_MIN, 0, MPI_COMM_WORLD);
    
    if (rank == 0) {
        printf("MPI_Reduce (MPI_MIN) нәтижелері:\n");
        printf("Әрбір позиция үшін 4 процестен минималды мән:\n");
        
        for (int i = 0; i < ARRAY_SIZE; i++) {
            printf("Позиция %d: мин = %.1f\n", i, global_min[i]);
        }
    }
    
    MPI_Finalize();
    return 0;
}</code></pre>
                        </div>
                    </div>
                </div>
                
                <!-- Task 51 - MPIBegin51 -->
                <div class="accordion-item">
                    <div class="accordion-header" data-task="51">
                        <div class="accordion-title">
                            <i class="fas fa-times-circle"></i> MPIBegin51
                            <span class="task-number">2</span>
                        </div>
                        <i class="fas fa-chevron-down accordion-icon"></i>
                    </div>
                    <div class="accordion-content">
                        <div class="task-description">
                            <p><strong>Тапсырма:</strong> Әр процесте K+5 саннан тұратын жиынтық берілген. MPI_Allreduce функциясын MPI_PROD операциясымен пайдаланып, әрбір реттік нөмірдегі элементтерді көбейтіп, алынған көбейтінділерді барлық процесстерде шығару.</p>
                            <p><strong>K = 4, K+5 = 9 сан әр процесте</strong></p>
                        </div>
                        
                        <div class="code-execution">
                            <h4><i class="fas fa-play-circle"></i> Енгізу деректері (4 процесс, әрқайсысында 9 сан):</h4>
                            
                            <button class="compact-run-btn" data-task="51">
                                <i class="fas fa-play"></i> Іске қосу (MPI_Allreduce + MPI_PROD)
                            </button>
                            
                            <div class="compact-output" id="output51">
                                Мәліметтерді енгізіңіз және "Іске қосу" түймесін басыңыз...
                            </div>
                        </div>
                        
                        <div class="explanation">
                            <h4><i class="fas fa-lightbulb"></i> Негізгі идея:</h4>
                            <p>MPI_Allreduce MPI_Reduce сияқты, бірақ нәтиже барлық процесстерде болады. MPI_PROD - көбейту операциясы.</p>
                        </div>
                        
                        <div class="code-example">
                            <div class="code-header">
                                <span>mpi_begin51.c - ДҰРЫС ШЕШІМ</span>
                                <button class="copy-btn" onclick="copyCode('task51-code')">
                                    <i class="far fa-copy"></i> Көшіру
                                </button>
                            </div>
                            <pre id="task51-code"><code>#include "mpi.h"
#include &lt;stdio.h&gt;

#define K 4
#define ARRAY_SIZE 9

int main(int argc, char *argv[]) {
    int rank;
    double local_array[ARRAY_SIZE];
    double global_product[ARRAY_SIZE];
    
    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    
    // Әр процесте массивті толтыру
    for (int i = 0; i < ARRAY_SIZE; i++) {
        local_array[i] = rank + 1 + i * 0.1; // Мысал мәндер
    }
    
    // MPI_Allreduce: барлық процесстерде көбейтінділер
    MPI_Allreduce(local_array, global_product, ARRAY_SIZE,
                  MPI_DOUBLE, MPI_PROD, MPI_COMM_WORLD);
    
    printf("Процесс %d: MPI_Allreduce (MPI_PROD) нәтижелері:\n", rank);
    
    for (int i = 0; i < ARRAY_SIZE; i++) {
        printf("  Позиция %d: көбейтінді = %.4f\n", i, global_product[i]);
    }
    
    MPI_Finalize();
    return 0;
}</code></pre>
                        </div>
                    </div>
                </div>
                
                <!-- Task 53 - MPIBegin53 -->
                <div class="accordion-item">
                    <div class="accordion-header" data-task="53">
                        <div class="accordion-title">
                            <i class="fas fa-share-alt"></i> MPIBegin53
                            <span class="task-number">3</span>
                        </div>
                        <i class="fas fa-chevron-down accordion-icon"></i>
                    </div>
                    <div class="accordion-content">
                        <div class="task-description">
                            <p><strong>Тапсырма:</strong> Әр процесте K бүтін саны бар (K - процесстер саны). MPI_Reduce_scatter функциясын пайдаланып, әрбір реттік нөмірдегі элементтерді қосып, алынған қосындыларды әр процеске бөліп жіберу (бірінші қосынды - 0 процеске, екіншісі - 1 процеске, т.б.).</p>
                            <p><strong>K = 4, әр процесте 4 сан</strong></p>
                        </div>
                        
                        <div class="code-execution">
                            <h4><i class="fas fa-play-circle"></i> Енгізу деректері (4 процесс, әрқайсысында 4 сан):</h4>
                            
                            <button class="compact-run-btn" data-task="53">
                                <i class="fas fa-play"></i> Іске қосу (MPI_Reduce_scatter)
                            </button>
                            
                            <div class="compact-output" id="output53">
                                Мәліметтерді енгізіңіз және "Іске қосу" түймесін басыңыз...
                            </div>
                        </div>
                        
                        <div class="explanation">
                            <h4><i class="fas fa-lightbulb"></i> Негізгі идея:</h4>
                            <p>MPI_Reduce_scatter алдымен қысқартуды (reduce) орындайды, содан кейін нәтижені шашыратады (scatter).</p>
                        </div>
                        
                        <div class="code-example">
                            <div class="code-header">
                                <span>mpi_begin53.c - ДҰРЫС ШЕШІМ</span>
                                <button class="copy-btn" onclick="copyCode('task53-code')">
                                    <i class="far fa-copy"></i> Көшіру
                                </button>
                            </div>
                            <pre id="task53-code"><code>#include "mpi.h"
#include &lt;stdio.h&gt;

#define K 4  // Процесс саны

int main(int argc, char *argv[]) {
    int rank, size;
    int send_array[K];
    int recv_value;
    int recv_counts[K];
    
    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &size);
    
    // Әр процесте массивті толтыру
    for (int i = 0; i < K; i++) {
        send_array[i] = (rank + 1) * 10 + i; // Мысал мәндер
    }
    
    // recv_counts массиві: әр процеске 1 элемент
    for (int i = 0; i < K; i++) {
        recv_counts[i] = 1;
    }
    
    // MPI_Reduce_scatter: қосып, шашырату
    MPI_Reduce_scatter(send_array, &recv_value, recv_counts,
                       MPI_INT, MPI_SUM, MPI_COMM_WORLD);
    
    printf("Процесс %d: алған қосынды = %d\n", rank, recv_value);
    
    MPI_Finalize();
    return 0;
}</code></pre>
                        </div>
                    </div>
                </div>
                
                <!-- Task 57 - MPIBegin57 -->
                <div class="accordion-item">
                    <div class="accordion-header" data-task="57">
                        <div class="accordion-title">
                            <i class="fas fa-chart-line"></i> MPIBegin57
                            <span class="task-number">4</span>
                        </div>
                        <i class="fas fa-chevron-down accordion-icon"></i>
                    </div>
                    <div class="accordion-content">
                        <div class="task-description">
                            <p><strong>Тапсырма:</strong> Әр процесте K+5 бүтін саны бар. MPI_Scan функциясын пайдаланып, R рангті процесте 0-ден R-ге дейінгі процесстердегі әрбір реттік нөмірдегі элементтердің максималды мәндерін тауып, әр процесте табылған максимумдарды шығару.</p>
                            <p><strong>K = 4, K+5 = 9 сан әр процесте</strong></p>
                        </div>
                        
                        <div class="code-execution">
                            <h4><i class="fas fa-play-circle"></i> Енгізу деректері (4 процесс, әрқайсысында 9 сан):</h4>
                            
                            <button class="compact-run-btn" data-task="57">
                                <i class="fas fa-play"></i> Іске қосу (MPI_Scan + MPI_MAX)
                            </button>
                            
                            <div class="compact-output" id="output57">
                                Мәліметтерді енгізіңіз және "Іске қосу" түймесін басыңыз...
                            </div>
                        </div>
                        
                        <div class="explanation">
                            <h4><i class="fas fa-lightbulb"></i> Негізгі идея:</h4>
                            <p>MPI_Scan инклюзивті сканирование орындайды: R процесінде 0..R процесстердің нәтижесі болады. MPI_MAX - максимум операциясы.</p>
                        </div>
                        
                        <div class="code-example">
                            <div class="code-header">
                                <span>mpi_begin57.c - ДҰРЫС ШЕШІМ</span>
                                <button class="copy-btn" onclick="copyCode('task57-code')">
                                    <i class="far fa-copy"></i> Көшіру
                                </button>
                            </div>
<pre id="task57-code"><code>#include "mpi.h"
#include &lt;stdio.h&gt;

#define K 4
#define ARRAY_SIZE 9

int main(int argc, char *argv[]) {
    int rank;
    int local_array[ARRAY_SIZE];
    int scan_result[ARRAY_SIZE];
    
    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    
    // Әр процесте массивті толтыру
    for (int i = 0; i < ARRAY_SIZE; i++) {
        local_array[i] = (rank + 1) * 5 + i; // Мысал мәндер
    }
    
    // MPI_Scan: инклюзивті сканирование
    MPI_Scan(local_array, scan_result, ARRAY_SIZE,
             MPI_INT, MPI_MAX, MPI_COMM_WORLD);
    
    printf("Процесс %d: MPI_Scan (MPI_MAX) нәтижелері (0..%d процесстер):\n", 
           rank, rank);
    
    for (int i = 0; i < ARRAY_SIZE; i++) {
        printf("  Позиция %d: макс = %d\n", i, scan_result[i]);
    }
    
    MPI_Finalize();
    return 0;
}</code></pre>
                        </div>
                    </div>
                </div>
                
                <!-- Task 60 - MPIBegin60 -->
                <div class="accordion-item">
                    <div class="accordion-header" data-task="60">
                        <div class="accordion-title">
                            <i class="fas fa-cube"></i> MPIBegin60
                            <span class="task-number">5</span>
                        </div>
                        <i class="fas fa-chevron-down accordion-icon"></i>
                    </div>
                    <div class="accordion-content">
                        <div class="task-description">
                            <p><strong>Тапсырма:</strong> Әрбір бас емес процесте үш бүтін сан берілген. Үш бүтін саннан тұратын туынды типті пайдаланып, бір жиынтық операция арқылы сандарды бас емес процесстерден бас процессқа жіберіп, алынған сандарды жіберген процесстер рангтерінің өсу ретімен шығару.</p>
                        </div>
                        
                        <div class="code-execution">
                            <h4><i class="fas fa-play-circle"></i> Енгізу деректері (3 бас емес процесс):</h4>
                            
                            <div class="process-input-group">
                                <h5>Процесс 1 (үш бүтін сан):</h5>
                                <div class="derived-type">
                                    <div class="compact-input">
                                        <div class="type-label">Бірінші сан:</div>
                                        <input type="number" id="task60-p1-1" value="10" step="1">
                                    </div>
                                    <div class="compact-input">
                                        <div class="type-label">Екінші сан:</div>
                                        <input type="number" id="task60-p1-2" value="20" step="1">
                                    </div>
                                    <div class="compact-input">
                                        <div class="type-label">Үшінші сан:</div>
                                        <input type="number" id="task60-p1-3" value="30" step="1">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="process-input-group">
                                <h5>Процесс 2 (үш бүтін сан):</h5>
                                <div class="derived-type">
                                    <div class="compact-input">
                                        <div class="type-label">Бірінші сан:</div>
                                        <input type="number" id="task60-p2-1" value="40" step="1">
                                    </div>
                                    <div class="compact-input">
                                        <div class="type-label">Екінші сан:</div>
                                        <input type="number" id="task60-p2-2" value="50" step="1">
                                    </div>
                                    <div class="compact-input">
                                        <div class="type-label">Үшінші сан:</div>
                                        <input type="number" id="task60-p2-3" value="60" step="1">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="process-input-group">
                                <h5>Процесс 3 (үш бүтін сан):</h5>
                                <div class="derived-type">
                                    <div class="compact-input">
                                        <div class="type-label">Бірінші сан:</div>
                                        <input type="number" id="task60-p3-1" value="70" step="1">
                                    </div>
                                    <div class="compact-input">
                                        <div class="type-label">Екінші сан:</div>
                                        <input type="number" id="task60-p3-2" value="80" step="1">
                                    </div>
                                    <div class="compact-input">
                                        <div class="type-label">Үшінші сан:</div>
                                        <input type="number" id="task60-p3-3" value="90" step="1">
                                    </div>
                                </div>
                            </div>
                            
                            <button class="compact-run-btn" data-task="60">
                                <i class="fas fa-play"></i> Іске қосу (Туынды тип + MPI_Gather)
                            </button>
                            
                            <div class="compact-output" id="output60">
                                Мәліметтерді енгізіңіз және "Іске қосу" түймесін басыңыз...
                            </div>
                        </div>
                        
                        <div class="explanation">
                            <h4><i class="fas fa-lightbulb"></i> Негізгі идея:</h4>
                            <p>MPI_Type_create_struct арқылы үш бүтін саннан тұратын туынды тип жасалады. MPI_Gather арқылы барлық деректер бас процессқа жиналады.</p>
                        </div>
                        
                        <div class="code-example">
                            <div class="code-header">
                                <span>mpi_begin60.c - ДҰРЫС ШЕШІМ</span>
                                <button class="copy-btn" onclick="copyCode('task60-code')">
                                    <i class="far fa-copy"></i> Көшіру
                                </button>
                            </div>
<pre id="task60-code"><code>#include "mpi.h"
#include &lt;stdio.h&gt;

typedef struct {
    int a, b, c;
} TripleInt;

int main(int argc, char *argv[]) {
    int rank, size;
    TripleInt my_triple;
    TripleInt all_triples[3]; // 3 бас емес процесс
    MPI_Datatype triple_type;
    
    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &size);
    
    // Туынды типті жасау
    int blocklengths[3] = {1, 1, 1};
    MPI_Aint displacements[3];
    MPI_Datatype types[3] = {MPI_INT, MPI_INT, MPI_INT};
    
    displacements[0] = offsetof(TripleInt, a);
    displacements[1] = offsetof(TripleInt, b);
    displacements[2] = offsetof(TripleInt, c);
    
    MPI_Type_create_struct(3, blocklengths, displacements, types, &triple_type);
    MPI_Type_commit(&triple_type);
    
    // Әр процесте мәндерді орнату
    if (rank == 1) { my_triple.a = 10; my_triple.b = 20; my_triple.c = 30; }
    else if (rank == 2) { my_triple.a = 40; my_triple.b = 50; my_triple.c = 60; }
    else if (rank == 3) { my_triple.a = 70; my_triple.b = 80; my_triple.c = 90; }
    
    // MPI_Gather: барлық деректерді бас процессқа жинау
    MPI_Gather(&my_triple, 1, triple_type,
               all_triples, 1, triple_type,
               0, MPI_COMM_WORLD);
    
    if (rank == 0) {
        printf("Бас процесс: барлық үштіктер (өсу ретімен):\n");
        for (int i = 0; i < 3; i++) {
            printf("Процесс %d: %d %d %d\n", 
                   i+1, all_triples[i].a, all_triples[i].b, all_triples[i].c);
        }
    }
    
    MPI_Type_free(&triple_type);
    MPI_Finalize();
    return 0;
}</code></pre>
                        </div>
                    </div>
                </div>
                
                <!-- Task 61 - MPIBegin61 -->
                <div class="accordion-item">
                    <div class="accordion-header" data-task="61">
                        <div class="accordion-title">
                            <i class="fas fa-project-diagram"></i> MPIBegin61
                            <span class="task-number">6</span>
                        </div>
                        <i class="fas fa-chevron-down accordion-icon"></i>
                    </div>
                    <div class="accordion-content">
                        <div class="task-description">
                            <p><strong>Тапсырма:</strong> Бас процесте K−1 үштік сан бар (K - процесстер саны), әр үштікте алғашқы екі сан бүтін, үшінші сан нақты. Екі бүтін және бір нақты саннан тұратын туынды типті пайдаланып, сандарды бас процестен бас емес процесстерге жіберіп, оларды бас емес процесстерде дәл сол ретпен шығару.</p>
                            <p><strong>K = 4, K−1 = 3 үштік</strong></p>
                        </div>
                        
                        <div class="code-execution">
                            <h4><i class="fas fa-play-circle"></i> Енгізу деректері (бас процесте 3 үштік):</h4>
                            
                            <div class="process-input-group">
                                <h5>Үштік 1 (процесс 1-ге):</h5>
                                <div class="derived-type">
                                    <div class="compact-input">
                                        <div class="type-label">Бүтін 1:</div>
                                        <input type="number" id="task61-t1-1" value="1" step="1">
                                    </div>
                                    <div class="compact-input">
                                        <div class="type-label">Бүтін 2:</div>
                                        <input type="number" id="task61-t1-2" value="2" step="1">
                                    </div>
                                    <div class="compact-input">
                                        <div class="type-label">Нақты:</div>
                                        <input type="number" id="task61-t1-3" value="3.14" step="0.01">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="process-input-group">
                                <h5>Үштік 2 (процесс 2-ге):</h5>
                                <div class="derived-type">
                                    <div class="compact-input">
                                        <div class="type-label">Бүтін 1:</div>
                                        <input type="number" id="task61-t2-1" value="4" step="1">
                                    </div>
                                    <div class="compact-input">
                                        <div class="type-label">Бүтін 2:</div>
                                        <input type="number" id="task61-t2-2" value="5" step="1">
                                    </div>
                                    <div class="compact-input">
                                        <div class="type-label">Нақты:</div>
                                        <input type="number" id="task61-t2-3" value="6.28" step="0.01">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="process-input-group">
                                <h5>Үштік 3 (процесс 3-ке):</h5>
                                <div class="derived-type">
                                    <div class="compact-input">
                                        <div class="type-label">Бүтін 1:</div>
                                        <input type="number" id="task61-t3-1" value="7" step="1">
                                    </div>
                                    <div class="compact-input">
                                        <div class="type-label">Бүтін 2:</div>
                                        <input type="number" id="task61-t3-2" value="8" step="1">
                                    </div>
                                    <div class="compact-input">
                                        <div class="type-label">Нақты:</div>
                                        <input type="number" id="task61-t3-3" value="9.42" step="0.01">
                                    </div>
                                </div>
                            </div>
                            
                            <button class="compact-run-btn" data-task="61">
                                <i class="fas fa-play"></i> Іске қосу (Туынды тип + MPI_Scatter)
                            </button>
                            
                            <div class="compact-output" id="output61">
                                Мәліметтерді енгізіңіз және "Іске қосу" түймесін басыңыз...
                            </div>
                        </div>
                        
                        <div class="explanation">
                            <h4><i class="fas fa-lightbulb"></i> Негізгі идея:</h4>
                            <p>MPI_Scatter бас процестен деректерді барлық процесстерге бөледі. Туынды тип әртүрлі типтегі деректерді бірге алып жүруге мүмкіндік береді.</p>
                        </div>
                        
                        <div class="code-example">
                            <div class="code-header">
                                <span>mpi_begin61.c - ДҰРЫС ШЕШІМ</span>
                                <button class="copy-btn" onclick="copyCode('task61-code')">
                                    <i class="far fa-copy"></i> Көшіру
                                </button>
                            </div>
<pre id="task61-code"><code>#include "mpi.h"
#include &lt;stdio.h&gt;

typedef struct {
    int a, b;
    double c;
} MixedTriple;

int main(int argc, char *argv[]) {
    int rank, size;
    MixedTriple send_data[3]; // K-1 = 3
    MixedTriple recv_data;
    MPI_Datatype mixed_type;
    
    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &size);
    
    // Туынды типті жасау
    int blocklengths[3] = {1, 1, 1};
    MPI_Aint displacements[3];
    MPI_Datatype types[3] = {MPI_INT, MPI_INT, MPI_DOUBLE};
    
    displacements[0] = offsetof(MixedTriple, a);
    displacements[1] = offsetof(MixedTriple, b);
    displacements[2] = offsetof(MixedTriple, c);
    
    MPI_Type_create_struct(3, blocklengths, displacements, types, &mixed_type);
    MPI_Type_commit(&mixed_type);
    
    if (rank == 0) {
        // Бас процесте деректерді толтыру
        send_data[0].a = 1; send_data[0].b = 2; send_data[0].c = 3.14;
        send_data[1].a = 4; send_data[1].b = 5; send_data[1].c = 6.28;
        send_data[2].a = 7; send_data[2].b = 8; send_data[2].c = 9.42;
    }
    
    // MPI_Scatter: бас процестен басқаларға бөлу
    MPI_Scatter(send_data, 1, mixed_type,
                &recv_data, 1, mixed_type,
                0, MPI_COMM_WORLD);
    
    if (rank != 0) {
        printf("Процесс %d: алған үштік: %d %d %.2f\n",
               rank, recv_data.a, recv_data.b, recv_data.c);
    }
    
    MPI_Type_free(&mixed_type);
    MPI_Finalize();
    return 0;
}</code></pre>
                        </div>
                    </div>
                </div>
                
                <!-- Task 64 - MPIBegin64 -->
                <div class="accordion-item">
                    <div class="accordion-header" data-task="64">
                        <div class="accordion-title">
                            <i class="fas fa-broadcast-tower"></i> MPIBegin64
                            <span class="task-number">7</span>
                        </div>
                        <i class="fas fa-chevron-down accordion-icon"></i>
                    </div>
                    <div class="accordion-content">
                        <div class="task-description">
                            <p><strong>Тапсырма:</strong> Әр процесте үш сан бар: бірінші және үшіншісі бүтін, екіншісі нақты. Екі бүтін және бір нақты саннан тұратын туынды типті пайдаланып, деректерді әр процестен барлық процесстерге жіберіп, әр процесте алынған сандарды жіберген процесстер рангтерінің өсу ретімен шығару.</p>
                        </div>
                        
                        <div class="code-execution">
                            <h4><i class="fas fa-play-circle"></i> Енгізу деректері (4 процесс):</h4>
                            
                            <button class="compact-run-btn" data-task="64">
                                <i class="fas fa-play"></i> Іске қосу (Туынды тип + MPI_Allgather)
                            </button>
                            
                            <div class="compact-output" id="output64">
                                Мәліметтерді енгізіңіз және "Іске қосу" түймесін басыңыз...
                            </div>
                        </div>
                        
                        <div class="explanation">
                            <h4><i class="fas fa-lightbulb"></i> Негізгі идея:</h4>
                            <p>MPI_Allgather әр процестен деректерді жинап, барлық процесстерге жібереді. Туынды тип әртүрлі типтегі деректерді бірге алып жүруге мүмкіндік береді.</p>
                        </div>
                        
                        <div class="code-example">
                            <div class="code-header">
                                <span>mpi_begin64.c - ДҰРЫС ШЕШІМ</span>
                                <button class="copy-btn" onclick="copyCode('task64-code')">
                                    <i class="far fa-copy"></i> Көшіру
                                </button>
                            </div>
<pre id="task64-code"><code>#include "mpi.h"
#include &lt;stdio.h&gt;

typedef struct {
    int a;
    double b;
    int c;
} MixedTriple;

int main(int argc, char *argv[]) {
    int rank, size;
    MixedTriple my_data;
    MixedTriple all_data[4]; // 4 процесс
    MPI_Datatype mixed_type;
    
    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &size);
    
    // Туынды типті жасау
    int blocklengths[3] = {1, 1, 1};
    MPI_Aint displacements[3];
    MPI_Datatype types[3] = {MPI_INT, MPI_DOUBLE, MPI_INT};
    
    displacements[0] = offsetof(MixedTriple, a);
    displacements[1] = offsetof(MixedTriple, b);
    displacements[2] = offsetof(MixedTriple, c);
    
    MPI_Type_create_struct(3, blocklengths, displacements, types, &mixed_type);
    MPI_Type_commit(&mixed_type);
    
    // Әр процесте мәндерді орнату
    my_data.a = rank * 3 + 1;
    my_data.b = rank * 2.5 + 1.1;
    my_data.c = rank * 3 + 3;
    
    // MPI_Allgather: барлық деректерді барлық процесстерге
    MPI_Allgather(&my_data, 1, mixed_type,
                  all_data, 1, mixed_type,
                  MPI_COMM_WORLD);
    
    printf("Процесс %d: барлық үштіктер (өсу ретімен):\n", rank);
    for (int i = 0; i < size; i++) {
        printf("  Процесс %d: %d, %.1f, %d\n",
               i, all_data[i].a, all_data[i].b, all_data[i].c);
    }
    
    MPI_Type_free(&mixed_type);
    MPI_Finalize();
    return 0;
}</code></pre>
                        </div>
                    </div>
                </div>
                
                <!-- Task 67 - MPIBegin67 -->
                <div class="accordion-item">
                    <div class="accordion-header" data-task="67">
                        <div class="accordion-title">
                            <i class="fas fa-box"></i> MPIBegin67
                            <span class="task-number">8</span>
                        </div>
                        <i class="fas fa-chevron-down accordion-icon"></i>
                    </div>
                    <div class="accordion-content">
                        <div class="task-description">
                            <p><strong>Тапсырма:</strong> Бас процесте K−1 үштік сан бар, әр үштікте бірінші және үшінші сандар бүтін, екіншісі нақты. Деректерді орау функцияларын және бір жиынтық операцияны пайдаланып, әр бас емес процессқа бір үштік санды жіберіп, оларды бас емес процесстерде дәл сол ретпен шығару.</p>
                            <p><strong>K = 4, K−1 = 3 үштік</strong></p>
                        </div>
                        
                        <div class="code-execution">
                            <h4><i class="fas fa-play-circle"></i> Енгізу деректері (бас процесте 3 үштік):</h4>
                            
                            <button class="compact-run-btn" data-task="67">
                                <i class="fas fa-play"></i> Іске қосу (Орау + MPI_Scatter)
                            </button>
                            
                            <div class="compact-output" id="output67">
                                Мәліметтерді енгізіңіз және "Іске қосу" түймесін басыңыз...
                            </div>
                        </div>
                        
                        <div class="explanation">
                            <h4><i class="fas fa-lightbulb"></i> Негізгі идея:</h4>
                            <p>MPI_Pack арқылы әртүрлі типтегі деректерді бір буферге орауға болады. MPI_Unpack арқылы ашуға болады.</p>
                        </div>
                        
                        <div class="code-example">
                            <div class="code-header">
                                <span>mpi_begin67.c - ДҰРЫС ШЕШІМ</span>
                                <button class="copy-btn" onclick="copyCode('task67-code')">
                                    <i class="far fa-copy"></i> Көшіру
                                </button>
                            </div>
<pre id="task67-code"><code>#include "mpi.h"
#include &lt;stdio.h&gt;

int main(int argc, char *argv[]) {
    int rank, size;
    int position;
    char send_buffer[3 * (sizeof(int) + sizeof(double) + sizeof(int) + MPI_BSEND_OVERHEAD)];
    char recv_buffer[sizeof(int) + sizeof(double) + sizeof(int) + MPI_BSEND_OVERHEAD];
    
    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &size);
    
    if (rank == 0) {
        // Бас процесс: деректерді буферге орау
        position = 0;
        
        // Үштік 1 (процесс 1-ге)
        int a1 = 1, c1 = 3;
        double b1 = 2.5;
        MPI_Pack(&a1, 1, MPI_INT, send_buffer, sizeof(send_buffer), &position, MPI_COMM_WORLD);
        MPI_Pack(&b1, 1, MPI_DOUBLE, send_buffer, sizeof(send_buffer), &position, MPI_COMM_WORLD);
        MPI_Pack(&c1, 1, MPI_INT, send_buffer, sizeof(send_buffer), &position, MPI_COMM_WORLD);
        
        // Үштік 2 (процесс 2-ге)
        int a2 = 4, c2 = 6;
        double b2 = 5.5;
        MPI_Pack(&a2, 1, MPI_INT, send_buffer, sizeof(send_buffer), &position, MPI_COMM_WORLD);
        MPI_Pack(&b2, 1, MPI_DOUBLE, send_buffer, sizeof(send_buffer), &position, MPI_COMM_WORLD);
        MPI_Pack(&c2, 1, MPI_INT, send_buffer, sizeof(send_buffer), &position, MPI_COMM_WORLD);
        
        // Үштік 3 (процесс 3-ке)
        int a3 = 7, c3 = 9;
        double b3 = 8.5;
        MPI_Pack(&a3, 1, MPI_INT, send_buffer, sizeof(send_buffer), &position, MPI_COMM_WORLD);
        MPI_Pack(&b3, 1, MPI_DOUBLE, send_buffer, sizeof(send_buffer), &position, MPI_COMM_WORLD);
        MPI_Pack(&c3, 1, MPI_INT, send_buffer, sizeof(send_buffer), &position, MPI_COMM_WORLD);
    }
    
    // Әр процеске бір үштік жіберу
    int recv_counts[4] = {position/3, position/3, position/3, 0};
    int displacements[4] = {0, position/3, 2*position/3, 0};
    
    MPI_Scatterv(send_buffer, recv_counts, displacements, MPI_PACKED,
                 recv_buffer, sizeof(recv_buffer), MPI_PACKED,
                 0, MPI_COMM_WORLD);
    
    if (rank != 0) {
        // Деректерді ашу
        position = 0;
        int a, c;
        double b;
        
        MPI_Unpack(recv_buffer, sizeof(recv_buffer), &position, &a, 1, MPI_INT, MPI_COMM_WORLD);
        MPI_Unpack(recv_buffer, sizeof(recv_buffer), &position, &b, 1, MPI_DOUBLE, MPI_COMM_WORLD);
        MPI_Unpack(recv_buffer, sizeof(recv_buffer), &position, &c, 1, MPI_INT, MPI_COMM_WORLD);
        
        printf("Процесс %d: алған үштік: %d, %.1f, %d\n", rank, a, b, c);
    }
    
    MPI_Finalize();
    return 0;
}</code></pre>
                        </div>
                    </div>
                </div>
                
                <!-- Task 70 - MPIBegin70 -->
                <div class="accordion-item">
                    <div class="accordion-header" data-task="70">
                        <div class="accordion-title">
                            <i class="fas fa-archive"></i> MPIBegin70
                            <span class="task-number">9</span>
                        </div>
                        <i class="fas fa-chevron-down accordion-icon"></i>
                    </div>
                    <div class="accordion-content">
                        <div class="task-description">
                            <p><strong>Тапсырма:</strong> Әрбір бас емес процесте бір нақты сан және R бүтін сан бар, мұндағы R - процестің рангі (процесс 1-де 1 бүтін сан, процесс 2-де 2 бүтін сан, т.б.). Деректерді орау функцияларын және бір жіберу-қабылдау функциясын пайдаланып, барлық деректерді бас процесске жіберіп, алынған деректерді жіберген процесстер рангтерінің өсу ретімен шығару.</p>
                        </div>
                        
                        <div class="code-execution">
                            <h4><i class="fas fa-play-circle"></i> Енгізу деректері (3 бас емес процесс):</h4>
                            
                            <div class="process-input-group">
                                <h5>Процесс 1 (R=1, 1 нақты + 1 бүтін):</h5>
                                <div class="compact-inputs">
                                    <div class="compact-input">
                                        <label>Нақты сан:</label>
                                        <input type="number" id="task70-p1-real" value="3.14" step="0.01">
                                    </div>
                                    <div class="compact-input">
                                        <label>Бүтін сан 1:</label>
                                        <input type="number" id="task70-p1-int1" value="10" step="1">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="process-input-group">
                                <h5>Процесс 2 (R=2, 1 нақты + 2 бүтін):</h5>
                                <div class="compact-inputs">
                                    <div class="compact-input">
                                        <label>Нақты сан:</label>
                                        <input type="number" id="task70-p2-real" value="2.71" step="0.01">
                                    </div>
                                    <div class="compact-input">
                                        <label>Бүтін сан 1:</label>
                                        <input type="number" id="task70-p2-int1" value="20" step="1">
                                    </div>
                                    <div class="compact-input">
                                        <label>Бүтін сан 2:</label>
                                        <input type="number" id="task70-p2-int2" value="21" step="1">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="process-input-group">
                                <h5>Процесс 3 (R=3, 1 нақты + 3 бүтін):</h5>
                                <div class="compact-inputs">
                                    <div class="compact-input">
                                        <label>Нақты сан:</label>
                                        <input type="number" id="task70-p3-real" value="1.41" step="0.01">
                                    </div>
                                    <div class="compact-input">
                                        <label>Бүтін сан 1:</label>
                                        <input type="number" id="task70-p3-int1" value="30" step="1">
                                    </div>
                                    <div class="compact-input">
                                        <label>Бүтін сан 2:</label>
                                        <input type="number" id="task70-p3-int2" value="31" step="1">
                                    </div>
                                    <div class="compact-input">
                                        <label>Бүтін сан 3:</label>
                                        <input type="number" id="task70-p3-int3" value="32" step="1">
                                    </div>
                                </div>
                            </div>
                            
                            <button class="compact-run-btn" data-task="70">
                                <i class="fas fa-play"></i> Іске қосу (Орау + MPI_Gather)
                            </button>
                            
                            <div class="compact-output" id="output70">
                                Мәліметтерді енгізіңіз және "Іске қосу" түймесін басыңыз...
                            </div>
                        </div>
                        
                        <div class="explanation">
                            <h4><i class="fas fa-lightbulb"></i> Негізгі идея:</h4>
                            <p>Әр процестегі деректер саны әртүрлі (R+1). MPI_Gatherv әртүрлі өлшемді деректерді жинауға мүмкіндік береді.</p>
                        </div>
                        
                        <div class="code-example">
                            <div class="code-header">
                                <span>mpi_begin70.c - ДҰРЫС ШЕШІМ</span>
                                <button class="copy-btn" onclick="copyCode('task70-code')">
                                    <i class="far fa-copy"></i> Көшіру
                                </button>
                            </div>
<pre id="task70-code"><code>#include "mpi.h"
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int main(int argc, char *argv[]) {
    int rank, size;
    int position;
    char *send_buffer = NULL;
    char *recv_buffer = NULL;
    int *recv_counts = NULL;
    int *displacements = NULL;
    
    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &size);
    
    if (rank == 0) {
        // Бас процесс: буферлерді дайындау
        recv_counts = (int*)malloc(size * sizeof(int));
        displacements = (int*)malloc(size * sizeof(int));
        recv_buffer = (char*)malloc(1000); // Жеткілікті үлкен буфер
    }
    
    // Әр процестегі деректер саны: 1 нақты + R бүтін
    int data_count = rank + 1; // R = rank для бас емес процесстер
    
    // Әр процестегі буфер өлшемін есептеу
    int buffer_size;
    MPI_Pack_size(1, MPI_DOUBLE, MPI_COMM_WORLD, &buffer_size);
    int int_size;
    MPI_Pack_size(rank, MPI_INT, MPI_COMM_WORLD, &int_size);
    buffer_size += int_size;
    
    send_buffer = (char*)malloc(buffer_size);
    position = 0;
    
    if (rank != 0) {
        // Деректерді орау
        double real_num = 1.1 * rank;
        MPI_Pack(&real_num, 1, MPI_DOUBLE, send_buffer, buffer_size, &position, MPI_COMM_WORLD);
        
        int ints[rank];
        for (int i = 0; i < rank; i++) {
            ints[i] = rank * 10 + i;
            MPI_Pack(&ints[i], 1, MPI_INT, send_buffer, buffer_size, &position, MPI_COMM_WORLD);
        }
    }
    
    // Әр процестен буфер өлшемдерін жинау
    int send_count = (rank != 0) ? position : 0;
    MPI_Gather(&send_count, 1, MPI_INT,
               recv_counts, 1, MPI_INT,
               0, MPI_COMM_WORLD);
    
    if (rank == 0) {
        // Орын ауыстыруларды есептеу
        displacements[0] = 0;
        for (int i = 1; i < size; i++) {
            displacements[i] = displacements[i-1] + recv_counts[i-1];
        }
    }
    
    // Барлық деректерді бас процесске жинау
    MPI_Gatherv(send_buffer, send_count, MPI_PACKED,
                recv_buffer, recv_counts, displacements, MPI_PACKED,
                0, MPI_COMM_WORLD);
    
    if (rank == 0) {
        printf("Бас процесс: барлық деректер (өсу ретімен):\n");
        
        for (int proc = 1; proc < size; proc++) {
            position = displacements[proc];
            
            double real_num;
            MPI_Unpack(recv_buffer, 1000, &position, &real_num, 1, MPI_DOUBLE, MPI_COMM_WORLD);
            
            printf("Процесс %d: нақты сан = %.2f, бүтін сандар = ", proc, real_num);
            
            int int_num;
            for (int i = 0; i < proc; i++) {
                MPI_Unpack(recv_buffer, 1000, &position, &int_num, 1, MPI_INT, MPI_COMM_WORLD);
                printf("%d ", int_num);
            }
            printf("\n");
        }
    }
    
    free(send_buffer);
    if (rank == 0) {
        free(recv_buffer);
        free(recv_counts);
        free(displacements);
    }
    
    MPI_Finalize();
    return 0;
}</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>MPI<span>LAB</span></h3>
                    <p>Жоғары өнімді есептеулер және параллельдік бағдарламалау бойынша оқу ресурсы</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-github"></i></a>
                        <a href="#"><i class="fab fa-telegram"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Беттер</h4>
                    <ul>
                        <li><a href="../index.html">Басты бет</a></li>
                        <li><a href="../about.html">Жоба туралы</a></li>
                        <li><a href="../basics.html">MPI теориясы</a></li>
                        <li><a href="../cloud.html">Бұлттық технологиялар</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Модульдер</h4>
                    <ul>
                        <li><a href="module1.html">Модуль 1: Процессер рангтары</a></li>
                        <li><a href="module2.html">Модуль 2: Хабар алмасу</a></li>
                        <li><a href="module3.html" class="active">Модуль 3: Жиынтық операциялар</a></li>
                        <li><a href="module4.html">Модуль 4: Коллективтік жіберу</a></li>
                        <li><a href="module5.html">Модуль 5: Виртуалды топологиялар</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Байланыс</h4>
                    <p><i class="fas fa-user-graduate"></i> Жетекші: Букенова Индира Нурмуханбетовна</p>
                    <p><i class="fas fa-calendar"></i> 2024 жыл</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 MPI LAB - Барлық құқықтар қорғалған</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Заполняем массивы для задач 49, 51, 53, 57
            function createArrayInputs(taskId, processNum, arraySize) {
                const container = document.getElementById(`${taskId}-${processNum}`);
                if (!container) return;
                
                container.innerHTML = '';
                
                for (let i = 0; i < arraySize; i++) {
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'array-item';
                    
                    let defaultValue = (processNum + 1) * 10 + i;
                    if (taskId === 'array49' || taskId === 'array51' || taskId === 'array57') {
                        // Для вещественных чисел
                        defaultValue += (processNum + i) * 0.1;
                    }
                    
                    itemDiv.innerHTML = `
                        <label>[${i}]:</label>
                        <input type="number" id="${taskId}-${processNum}-${i}" 
                               value="${defaultValue.toFixed(1)}" 
                               step="${taskId === 'array53' ? '1' : '0.1'}">
                    `;
                    container.appendChild(itemDiv);
                }
            }
            
            // Инициализация массивов
            ['array49', 'array51', 'array53', 'array57'].forEach(taskId => {
                let arraySize = 9; // K+5 = 9
                if (taskId === 'array53') arraySize = 4; // K = 4
                
                for (let proc = 0; proc < 4; proc++) {
                    createArrayInputs(taskId, proc, arraySize);
                }
            });
            
            // Аккордеон функционал
            const accordionHeaders = document.querySelectorAll('.accordion-header');
            
            accordionHeaders.forEach(header => {
                header.addEventListener('click', function() {
                    const content = this.nextElementSibling;
                    const icon = this.querySelector('.accordion-icon');
                    
                    // Закрыть все остальные
                    document.querySelectorAll('.accordion-content.active').forEach(activeContent => {
                        if (activeContent !== content) {
                            activeContent.classList.remove('active');
                            activeContent.previousElementSibling.classList.remove('active');
                        }
                    });
                    
                    // Переключить текущий
                    this.classList.toggle('active');
                    content.classList.toggle('active');
                });
            });
            
            // Обработка выполнения задач
            const runButtons = document.querySelectorAll('.compact-run-btn');
            
            runButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    const taskId = this.getAttribute('data-task');
                    const outputElement = document.getElementById(`output${taskId}`);
                    
                    this.classList.add('running');
                    const originalText = this.innerHTML;
                    this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Орындалуда...';
                    outputElement.textContent = 'MPI бағдарламасы іске қосылуда...\n';
                    
                    setTimeout(() => {
                        this.classList.remove('running');
                        this.innerHTML = originalText;
                        
                        let result = '';
                        switch(taskId) {
                            case '49':
                                result = `MPIBegin49: MPI_Reduce + MPI_MIN\n`;
                                result += `================================\n`;
                                result += `4 процесстен 9 позиция үшін минималды мәндер:\n`;
                                
                                // Для простоты используем примерные значения
                                for (let i = 0; i < 9; i++) {
                                    const minVal = Math.min(
                                        10 + i + 0.1,
                                        20 + i + 0.2, 
                                        30 + i + 0.3,
                                        40 + i + 0.4
                                    );
                                    result += `Позиция ${i}: мин = ${minVal.toFixed(1)}\n`;
                                }
                                break;
                                
                            case '51':
                                result = `MPIBegin51: MPI_Allreduce + MPI_PROD\n`;
                                result += `================================\n`;
                                result += `Барлық процесстердегі көбейтінділер:\n`;
                                
                                for (let i = 0; i < 9; i++) {
                                    const prod = (1.1 + i*0.1) * (2.1 + i*0.1) * (3.1 + i*0.1) * (4.1 + i*0.1);
                                    result += `Позиция ${i}: көбейтінді = ${prod.toFixed(4)}\n`;
                                }
                                break;
                                
                            case '53':
                                result = `MPIBegin53: MPI_Reduce_scatter\n`;
                                result += `================================\n`;
                                result += `Әр процеске 1 қосынды жіберілді:\n`;
                                
                                const sums = [100, 110, 120, 130]; // Примерные суммы
                                for (let i = 0; i < 4; i++) {
                                    result += `Процесс ${i}: қосынды = ${sums[i]}\n`;
                                }
                                break;
                                
                            case '57':
                                result = `MPIBegin57: MPI_Scan + MPI_MAX\n`;
                                result += `================================\n`;
                                result += `Әр процесте 0..R процесстердің максимумдары:\n`;
                                
                                const maxValues = [
                                    [5, 6, 7, 8, 9, 10, 11, 12, 13],    // Процесс 0
                                    [10, 11, 12, 13, 14, 15, 16, 17, 18], // Процесс 1
                                    [15, 16, 17, 18, 19, 20, 21, 22, 23], // Процесс 2
                                    [20, 21, 22, 23, 24, 25, 26, 27, 28]  // Процесс 3
                                ];
                                
                                for (let proc = 0; proc < 4; proc++) {
                                    result += `\nПроцесс ${proc} (0..${proc} процесстер):\n`;
                                    for (let i = 0; i < 9; i++) {
                                        result += `  Позиция ${i}: макс = ${maxValues[proc][i]}\n`;
                                    }
                                }
                                break;
                                
                            case '60':
                                // Собираем данные из ввода
                                const triple1 = {
                                    a: parseInt(document.getElementById('task60-p1-1').value) || 10,
                                    b: parseInt(document.getElementById('task60-p1-2').value) || 20,
                                    c: parseInt(document.getElementById('task60-p1-3').value) || 30
                                };
                                const triple2 = {
                                    a: parseInt(document.getElementById('task60-p2-1').value) || 40,
                                    b: parseInt(document.getElementById('task60-p2-2').value) || 50,
                                    c: parseInt(document.getElementById('task60-p2-3').value) || 60
                                };
                                const triple3 = {
                                    a: parseInt(document.getElementById('task60-p3-1').value) || 70,
                                    b: parseInt(document.getElementById('task60-p3-2').value) || 80,
                                    c: parseInt(document.getElementById('task60-p3-3').value) || 90
                                };
                                
                                result = `MPIBegin60: Туынды тип + MPI_Gather\n`;
                                result += `================================\n`;
                                result += `Бас процесс: барлық үштіктер (өсу ретімен):\n`;
                                result += `Процесс 1: ${triple1.a} ${triple1.b} ${triple1.c}\n`;
                                result += `Процесс 2: ${triple2.a} ${triple2.b} ${triple2.c}\n`;
                                result += `Процесс 3: ${triple3.a} ${triple3.b} ${triple3.c}\n`;
                                break;
                                
                            case '61':
                                // Собираем данные из ввода
                                const t1 = {
                                    a: parseInt(document.getElementById('task61-t1-1').value) || 1,
                                    b: parseInt(document.getElementById('task61-t1-2').value) || 2,
                                    c: parseFloat(document.getElementById('task61-t1-3').value) || 3.14
                                };
                                const t2 = {
                                    a: parseInt(document.getElementById('task61-t2-1').value) || 4,
                                    b: parseInt(document.getElementById('task61-t2-2').value) || 5,
                                    c: parseFloat(document.getElementById('task61-t2-3').value) || 6.28
                                };
                                const t3 = {
                                    a: parseInt(document.getElementById('task61-t3-1').value) || 7,
                                    b: parseInt(document.getElementById('task61-t3-2').value) || 8,
                                    c: parseFloat(document.getElementById('task61-t3-3').value) || 9.42
                                };
                                
                                result = `MPIBegin61: Туынды тип + MPI_Scatter\n`;
                                result += `================================\n`;
                                result += `Бас емес процесстерде алынған үштіктер:\n`;
                                result += `Процесс 1: ${t1.a} ${t1.b} ${t1.c.toFixed(2)}\n`;
                                result += `Процесс 2: ${t2.a} ${t2.b} ${t2.c.toFixed(2)}\n`;
                                result += `Процесс 3: ${t3.a} ${t3.b} ${t3.c.toFixed(2)}\n`;
                                break;
                                
                            case '64':
                                result = `MPIBegin64: Туынды тип + MPI_Allgather\n`;
                                result += `================================\n`;
                                result += `Барлық процесстердегі үштіктер:\n`;
                                
                                // Примерные значения для 4 процессов
                                const triples64 = [
                                    {a: 1, b: 1.1, c: 3},
                                    {a: 4, b: 3.6, c: 6},
                                    {a: 7, b: 6.1, c: 9},
                                    {a: 10, b: 8.6, c: 12}
                                ];
                                
                                for (let proc = 0; proc < 4; proc++) {
                                    result += `\nПроцесс ${proc} үшін барлық үштіктер:\n`;
                                    for (let src = 0; src < 4; src++) {
                                        result += `  Процесс ${src} -> ${triples64[src].a}, ${triples64[src].b.toFixed(1)}, ${triples64[src].c}\n`;
                                    }
                                }
                                break;
                                
                            case '67':
                                result = `MPIBegin67: Орау + MPI_Scatter\n`;
                                result += `================================\n`;
                                result += `Бас емес процесстерде алынған үштіктер:\n`;
                                result += `Процесс 1: 1, 2.5, 3\n`;
                                result += `Процесс 2: 4, 5.5, 6\n`;
                                result += `Процесс 3: 7, 8.5, 9\n`;
                                break;
                                
                            case '70':
                                // Собираем данные из ввода
                                const p1_real = parseFloat(document.getElementById('task70-p1-real').value) || 3.14;
                                const p1_int1 = parseInt(document.getElementById('task70-p1-int1').value) || 10;
                                
                                const p2_real = parseFloat(document.getElementById('task70-p2-real').value) || 2.71;
                                const p2_int1 = parseInt(document.getElementById('task70-p2-int1').value) || 20;
                                const p2_int2 = parseInt(document.getElementById('task70-p2-int2').value) || 21;
                                
                                const p3_real = parseFloat(document.getElementById('task70-p3-real').value) || 1.41;
                                const p3_int1 = parseInt(document.getElementById('task70-p3-int1').value) || 30;
                                const p3_int2 = parseInt(document.getElementById('task70-p3-int2').value) || 31;
                                const p3_int3 = parseInt(document.getElementById('task70-p3-int3').value) || 32;
                                
                                result = `MPIBegin70: Орау + MPI_Gather\n`;
                                result += `================================\n`;
                                result += `Бас процесс: барлық деректер (өсу ретімен):\n`;
                                result += `Процесс 1: нақты сан = ${p1_real.toFixed(2)}, бүтін сандар = ${p1_int1}\n`;
                                result += `Процесс 2: нақты сан = ${p2_real.toFixed(2)}, бүтін сандар = ${p2_int1} ${p2_int2}\n`;
                                result += `Процесс 3: нақты сан = ${p3_real.toFixed(2)}, бүтін сандар = ${p3_int1} ${p3_int2} ${p3_int3}\n`;
                                break;
                        }
                        
                        outputElement.textContent = result;
                    }, 1500);
                });
            });
            
            // Функция копирования кода
            window.copyCode = function(codeId) {
                const codeElement = document.getElementById(codeId);
                const codeText = codeElement.textContent;
                
                navigator.clipboard.writeText(codeText).then(() => {
                    const btn = event.target.closest('.copy-btn');
                    const originalHTML = btn.innerHTML;
                    btn.innerHTML = '<i class="fas fa-check"></i> Көшірілді!';
                    
                    setTimeout(() => {
                        btn.innerHTML = originalHTML;
                    }, 2000);
                });
            };
            
            // Открыть первую задачу по умолчанию
            if (accordionHeaders.length > 0) {
                accordionHeaders[0].click();
            }
        });
    </script>
</body>
</html>